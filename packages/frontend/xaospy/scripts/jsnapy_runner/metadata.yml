# =============================================================================
# FILE: metadata.yml
# DESCRIPTION: Configuration file for the JSNAPy Runner tool, defining its metadata,
#              capabilities, and parameters for the UI and backend integration.
# DEPENDENCIES:
#   - PythonScriptRunner: Backend service to interpret this metadata and render UI components.
#   - JSNAPy: Python library for snapshot testing, used by the backend script.
# =============================================================================

# Basic metadata for the JSNAPy Runner tool
displayName: "JSNAPy Runner"
description: "Executes JSNAPy snapshot tests against devices to validate operational state."

# =============================================================================
# SECTION 1: TOOL CATEGORIZATION
# =============================================================================
# Assigns the script to the "Network Automation" dropdown menu in the navigation bar.
category: "Validation & Testing"
runnerComponent: "JsnapyRunner"

# =============================================================================
# SECTION 2: CAPABILITIES CONFIGURATION
# =============================================================================
# Defines the capabilities supported by the tool, controlling UI and backend behavior.
capabilities:
  # Enables manual hostname entry or inventory file selection for targeting devices.
  deviceTargeting: true
  # Requires authentication credentials for device access.
  deviceAuth: true
  # Enables dynamic discovery of tests based on the environment.
  dynamicDiscovery: true
  # Enables the "Save Report" button in the UI for saving test results.
  enableReportSaving: true
  # Configures the save button for test results.
  saveButton:
    enabled: true
    label: "Save JSNAPy Results"
    # Path relative to /python_pipeline for saving results.
    savePath: "tools/results/jsnapy_test_results"

# =============================================================================
# SECTION 3: DEVICE TARGETING CONFIGURATION
# =============================================================================
# Configuration for the deviceTargeting capability.
deviceTargeting:
  title: "Target Device Selection"
  description: "Choose target devices for backup or restore operations"
  # At least one of these fields must be provided by the user.
  requiredFields: ["hostname", "inventory_file"]

# =============================================================================
# SECTION 4: DEVICE AUTHENTICATION CONFIGURATION
# =============================================================================
# Configuration for the deviceAuth capability.
deviceAuth:
  title: "Device Authentication"
  description: "Provide credentials to access the target device(s)"
  requiredFields: ["username", "password"]

# =============================================================================
# SECTION 5: UI PARAMETERS
# =============================================================================
# Defines parameters required by the tool's UI.
parameters:
  - name: "environment"
    label: "Environment"
    type: "enum"
    required: true
    default: "development"
    options:
      - { value: "development", label: "Development" }
      - { value: "lab", label: "Lab" }
  - name: "tests"
    label: "Tests to run"
    type: "string_array"
    required: true
    description: "Select tests from the sidebar options."
